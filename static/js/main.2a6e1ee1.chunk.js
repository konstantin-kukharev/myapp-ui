(this["webpackJsonptemplate-admin-app"]=this["webpackJsonptemplate-admin-app"]||[]).push([[0],{183:function(t,e){},185:function(t,e){},198:function(t,e){},200:function(t,e){},228:function(t,e){},230:function(t,e){},231:function(t,e){},236:function(t,e){},238:function(t,e){},244:function(t,e){},246:function(t,e){},265:function(t,e){},277:function(t,e){},280:function(t,e){},297:function(t,e,n){},298:function(t,e,n){},299:function(t,e,n){},308:function(t,e,n){"use strict";n.r(e);var i=n(14),o=n(0),a=n.n(o),c=n(49),r=n.n(c),u=n(3),s=function(t){return Object(u.jsx)("h1",{children:"authorized"})},h=n(155),l=n(50),d=n(51),b=n(78),j=n.n(b),p=function(){function t(e){Object(l.a)(this,t),this.publicKey=void 0,this.currentDomain=void 0,this.basePath=void 0,this.publicKey=e.publicKey,this.currentDomain=e.api.domain,this.basePath=e.api.basePath}return Object(d.a)(t,[{key:"get",value:function(t,e){return j.a.get("".concat(this.basePath).concat(t),{params:e,withCredentials:!0}).then((function(t){return{error:0,data:t.data}})).catch((function(t){return console.error(t),{error:1,data:null}}))}},{key:"post",value:function(t,e){return j.a.post("".concat(this.basePath).concat(t),e,{withCredentials:!0}).then((function(t){return{error:0,data:t.data}})).catch((function(t){return console.error(t),{error:1,data:null}}))}}]),t}(),f=n(152),v=n.n(f),O=function(){function t(e){Object(l.a)(this,t),this.tokenKey=void 0,this.cookieKey=void 0,this.tokenString=void 0,this.authorized=!1,this.tokenKey=e.tokenKey,this.cookieKey=e.cookieKey,this.tokenString=this.getTokenString(),this.tokenString&&this.isTokenValid(e.publicKey)?this.authorized=!0:this.removeToken()}return Object(d.a)(t,[{key:"getTokenString",value:function(){if(this.tokenKey&&this.cookieKey){if(this.tokenString)return this.tokenString;var t=localStorage.getItem(this.tokenKey);if(t)return t;var e=document.cookie.match(new RegExp("(?:^|; )"+this.cookieKey.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return(t=e?decodeURIComponent(e[1]):void 0)||void 0}}},{key:"isTokenValid",value:function(t){if(!this.tokenString)return!1;try{return v.a.verify(this.tokenString,t,{algorithms:["RS256"]}),!0}catch(e){return!1}}},{key:"removeToken",value:function(){localStorage.removeItem(this.tokenKey)}},{key:"isAuthorized",value:function(){return this.authorized}}]),t}();n(297);var k=function(t){return Object(u.jsxs)("form",{className:"login",onSubmit:function(e){var n;e.preventDefault();var i=e.target,o=i.login.value,a=i.password.value;null===t||void 0===t||null===(n=t.api)||void 0===n||n.post("/auth",{login:o,password:a})},children:[Object(u.jsx)("input",{type:"text",name:"login",placeholder:"Login"}),Object(u.jsx)("input",{type:"password",name:"password",placeholder:"Password"}),Object(u.jsx)("button",{type:"submit",children:"Sign in"})]})},g=function(t){var e=new O(t),n=new p(t),i=a.a.useState(e.isAuthorized());return Object(h.a)(i,1)[0]?Object(u.jsx)("h1",{children:"authorized"}):Object(u.jsx)(k,{api:n})};n(298);var y=function(){return Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:"404 Not Found"}),Object(u.jsx)("a",{href:"/",children:"go back to main page"})]})},m=(n(299),n(40)),x=n(13),S=n(38),K=n(156),w=["children","appSettings"];var z=function(t){t.children;var e=t.appSettings,n=Object(K.a)(t,w);return Object(u.jsx)(x.b,Object(i.a)(Object(i.a)({},n),{},{render:function(){return Object(u.jsx)(x.a,{to:(null===e||void 0===e?void 0:e.basePath)+"/login"})}}))},P=n(18),I=n(32),E=n(151),A=!1,B={authorized:A,payload:{}},D=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"AUTHORIZE":case"LOGOUT":return Object(i.a)(Object(i.a)({},t),{},{authorized:A});default:return t}},C=function(t){return Object(I.b)({router:Object(S.b)(t),auth:D})},T=Object(P.a)();var Q,U=(Q={},Object(I.d)(C(T),Q,Object(I.c)(Object(I.a)(Object(E.a)(T))))),G={basePath:"".concat("/myapp-ui")},R={tokenKey:"".concat("local_token"),cookieKey:"".concat("local[session_key]"),publicKey:"".concat("-----BEGIN PUBLIC KEY-----MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQC8kGa1pSjbSYZVebtTRBLxBz5H4i2p/llLCrEeQhta5kaQu/RnvuER4W8oDH3+3iuIYW4VQAzyqFpwuzjkDI+17t5t0tyazyZ8JXw+KgXTxldMPEL95+qVhgXvwtihXC1c5oGbRlEDvDF6Sa53rcFVsYJ4ehde/zUxo6UvS7UrBQIDAQAB-----END PUBLIC KEY-----"),api:{basePath:"".concat("http://localhost/api/v1"),domain:"".concat("localhost")}};r.a.render(Object(u.jsx)(m.a,{store:U,children:Object(u.jsx)(S.a,{history:T,children:Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)(x.d,{children:[Object(u.jsx)(x.b,{exact:!0,path:(null===G||void 0===G?void 0:G.basePath)+"/login",children:Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(g,Object(i.a)({},R))})}),Object(u.jsx)(z,{exact:!0,path:null===G||void 0===G?void 0:G.basePath,appSettings:G,children:Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(s,Object(i.a)({},R))})}),Object(u.jsx)(x.b,{component:y})]})})})}),document.getElementById("root"))}},[[308,1,2]]]);
//# sourceMappingURL=main.2a6e1ee1.chunk.js.map